# 共识机制基础作业题

## 请解释工作量证明（Proof of Work, PoW）的基本原理。为什么说 PoW 能确保区块链的安全性？
PoW 算法就是通过基于算力的随机性竞争记账的方式，来选出一个记账节点打包区块，然后向其他节点广播这个新增区块信息。从此解决去中心化系统中的记账一致性问题，矿工需要通过哈希计算得到一个符合要求的随机数，获得记账权才可以创建新区块。pow的挖矿需要大量的计算工作和电力消耗，这使得攻击者难以干扰和双花支付，想要更改已经广播的区块就需要持有大于整个区块链系统50%以上的算力才可以。

## 权益证明（Proof of Stake, PoS）与工作量证明（PoW）相比有哪些优缺点？
**pow** 
- 优势：安全性高，发生51%攻击几乎是不可能的。矿工验证交易得到奖励维护网络平稳运行 
- 劣势：入行门槛高，硬件成本太贵。电力消耗过大。验证区块时间较慢

**pos**
- 优势：无需大量计算，硬件和能耗非常低。安全性高，因为需要质押对应货币才可以作为验证者，如果失信质押对应的币会被销毁。验证区块时间比pos快的多。 
- 劣势：pos需要质押货币，质押的越多质押时间越久，越容易被选为验证者获得奖励，就导致富的越来越富。另外容易产生分叉，这种分叉又会为双花攻击产生便利。

## 请描述委托权益证明（Delegated Proof of Stake, DPoS）的工作原理。它是如何提高区块链性能的？
dpos是pos的进阶版，pos需要质押代币，dpos也需要质押代币，质押代币的权益者通过投票选举出一些运营人通过专业的网络服务器来保障区块链的安全和性能。 dpos不需要计算，而是持币者选出的人，如果选出的人有不诚实行为，可以随时被投票出局，也就解决了性能问题。


## 拜占庭容错（Byzantine Fault Tolerance, BFT）在区块链中的应用是什么？请给出一个使用 BFT 共识机制的区块链项目实例。
BFT是在部分节点存在恶意攻击的情况下，依然可以达成共识。 Hyperledger 的 Fabric 项目就用的BFT共识机制。

## 什么是混合共识机制？请举例说明一种区块链使用的混合共识机制及其优点。
混合共识机制是指区块链系统运用了多个共识机制，像比特币他就是pow机制，而点点币则是用了pow+pos。 混合机制克服了单一共识机制的缺点，在安全、去中心化、能耗、效率方面有综合优化

## FLP 不可能定理有什么实际意义？
在异步通信中，一个节点出现故障，就不可能存在一个完美的共识算法可以使所有节点达成一致。 这也就表明，在现实情况设计共识算法时，需要有一定的妥协。

## Paxos 算法的主要目的是什么？
确保在分布式系统中，一半以上活着的节点可以达成一致决策。

## Raft 算法如何简化了共识的过程？

将一致性问题划分三个子问题来简化问题，分别是领导选举、日志复制、领导失联

## CAP 定理中的三个属性是什么？
强一致、分区容忍性、可用性

## 在分布式系统中，什么是两阶段提交（2PC）？
两阶段提交是一种确保在多个节点参与的事务中实现一致性的协议。它包括两个阶段：准备阶段和提交/回滚阶段。在第一阶段，事务协调者询问所有参与节点是否准备好提交事务，如果所有节点同意，然后在第二阶段进行事务的提交，否则事务将被回滚。

## 为什么说拜占庭容错（BFT）算法对区块链技术很重要？
区块链是在不受信任的情况下工作的，BFT保证再有恶意节点的情况下依然可以达成共识

## 解释什么是日志复制在 Raft 算法中的作用？
日志复制确保了数据的一致性和完整性，同时还提高了系统的可靠性和效率

## 在选择共识算法时应考虑哪些关键因素？
节点规模，安全性要求、高性能要求、延迟性要求

## 比特币使用的 PoW 算法如何解决记账的一致性问题？
通过基于算力的随机性竞争记账的方式（如找到特定的 Nonce 使得新区块的哈希值满足一定条件），来选出一个记账节点打包区块，然后向其他节点广播这个新增区块信息。从此解决去中心化系统中的记账一致性问题

## PoW 算法中的「难度值」是如何工作的？
难度调整是在每个全节点中独立自动发生的。每 2016 个区块，所有节点都会按统一公式自动调整难度，这个公式是由前 2016 个区块的花费时长和期望时长比较得出的。如果前 2016 个区块的花费时长比期望时长更短，则增加难度，否则减小难度。


## 什么是权益证明（PoS）共识算法？
节点通过投入一定量的虚拟币参与共识，根据持币情况获得打包新区块的权利，并获得奖励。权益证明不依赖算力，而是依据持币量和币龄等因素决定记账权的共识机制。它旨在减少能源消耗，提高交易的速度和效率。

## PoS 中的「币龄」是如何计算的？
币龄计算方式：Coinage=k * balance * age; 币龄在使用对应虚拟币（用于区块生成或交易）后会被销毁。节点币龄越大，越容易生成区块。

## 描述 DPoS 共识算法的主要工作原理。
DPoS 是一种基于投票选举的共识算法，有点像民主大会，持币人选出几个代表节点来运营网络， 用专业运行的网络服务器来保证区块链网络的安全和性能。

## PBFT 算法如何实现共识？
 实用拜占庭容错算法通过一种状态机复制的方法来实现共识，核心目标时保证存在一定比例的拜占庭节点，系统仍能保持一致性和安全性。它采用多阶段通信协议来实现共识，确保所有节点就某个交易或请求达成一致。

## PBFT 算法中的「视图更换」是什么意思？
视图更换是 PBFT 算法中的一部分，用于处理主节点可能的故障。如果主节点由于某些原因无法正常工作，系统会通过视图更换协议来选举新的主节点继续进行操作。

## Casper 共识算法与传统 PoS 有什么不同？
casper结合了pow和pos两者的优势，并且成为验证者需要通过智能合约在系统存入一定限度的保证金。 如果有恶意行为，系统将减少保证金来惩罚恶意行为。